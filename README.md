**一、实验目的与要求**

目标1：能够利用人工智能算法和所学知识，对复杂人工智能应用系统，选择合理的研究路线，构建可行的应用系统构架。

目标2：能够完成人工智能功能模块的设计，能体现优化和创新意识。

目标3：能够采用开源人工智能开发技术与平台，合理实现复杂人工智能应用系统与设计实验方案。

目标4：根据人工智能应用系统测试实验目的，确定需要的数据，科学采集实验数据。

目标5：能够遵循技术文档规范撰写复杂人工智能应用系统技术报告和设计文档，并对收集的实验数据合理分析人工智能应用系统设计的有效性。

**二、实验内容**

A)给出用 A*算法设计实现五子棋博弈的思想与方法。

B)设计实现五子棋博弈交互系统。

C)对不同的格局，以及不同的初始状态和目标状态，记录 A*算法的落棋求解结果。

D)分析A*算法设计实现五子棋博弈的有效性。

**三、实验设备与环境**

Windows11 笔记本   

IntelliJ IDEA Community Edition

**四、设计正文**

**（1）五子棋游戏规则**

1.对局双方各执一色棋子，空棋盘开局。

2.黑先 (Start)、白后 ,从天元开始相互顺序落子，每次下一子，且只能下在空白的交叉点处。 黑方的第一个棋子应下在天元上 ,白方第一个棋子只能下在与天元为中心邻近的八个点上。

3.黑方第二个棋子只能下在与天元为中心邻近5×5点上,白棋第二个棋子不受限制,可下在棋盘任意位置。棋子下在棋盘的空白点上，棋子下定后，不得向其它点移动，不得从棋盘上拿掉或拿起另落别处。轮流下子是双方的权利，但允许任何一方放弃下子权

4.最先在棋盘横向、竖向、斜向形成连续的相同色五个棋子的一方为胜。

**（2）五子棋对弈的算法描述**

对于当前棋局，我们的目的是找到一个最佳的落子点，使得我方的胜算最大。为了判断到底落子何处才能使胜算最大，我们需要往后多推算几步，包括推算我方落子和对方落子，模拟出可能出现的棋局，从这些棋局中选出胜算最大的那个棋局，进而确定下一步的最佳落子点。

本算法始终认为计算机是黑方，如果计算机是白方，我们可以反转棋盘上所有的黑白棋子，这样计算机就变成了黑方。本算法的输入是一个棋局，输出的是下一步的落子点坐标。

   **（3）五子棋棋型介绍（设计启发函数会用到）**

​    最常见的基本棋型大体有以下几种：连五，活四，冲四，活三，眠三，活二，眠二。五子棋是一个双方对弈的游戏，我们称执黑子的一方为“黑方”，执白子的一方为“白方”。

   ①连五：顾名思义，五颗同色棋子连在一起，不需要多讲。

   ②活四：有两个连五点（即有两个点可以形成五）。稍微思考一下就能发现活四出现的时候，如果对方单纯过来防守的话，是已经无法阻止自己连五了。

   ③冲四：有一个连五点，相对比活四来说，冲四的威胁性就小了很多，因为这个时候，对方只要跟着防守在那个唯一的连五点上，冲四就没法形成连五。

   ④活三：可以形成活四的三，活三棋型是我们进攻中最常见的一种，因为活三之后，如果对方不以理会，将可以下一手将活三变成活四，而我们知道活四是已经无法单纯防守住了。所以，当我们面对活三的时候，需要非常谨慎对待。在自己没有更好的进攻手段的情况下，需要对其进行防守，以防止其形成可怕的活四棋型。

⑤眠三：只能够形成冲四的三，眠三的棋型与活三的棋型相比，危险系数下降不少，因为眠三棋型即使不去防守，下一手它也只能形成冲四，而对于单纯的冲四棋型，我们知道，是可以防守住的。

 ⑥活二：能够形成活三的二，活二棋型看起来似乎很无害，因为他下一手棋才能形成活三，等形成活三，我们再防守也不迟。但其实活二棋型是非常重要的，尤其是在开局阶段，我们形成较多的活二棋型的话，当我们将活二变成活三时，才能够令自己的活三绵绵不绝微风里，让对手防不胜防。

⑦眠二：能够形成眠三的为眠二。

**（3）博弈树-极大极小搜索**

五子棋按照分类属于完全信息动态零和博弈。这里就涉及了很多看上去貌似很复杂的词汇。

首先，博弈就是下棋，或者说就是game，这个很好理解。前面三个词语就需要一一解释了：

完全信息：游戏进行的任何时候，双方参与者对棋盘上的全部信息都完全了解。这一点就不像军旗、斗地主、麻将，我并不知道对方的一些信息。

动态：双方是轮流下子，每一步棋做决策之前，需要上一步棋的局面状态做出相应的选择。而非石头剪刀布那样，双方同时做决策。

零和（zero sum）：或者说是“非合作性”，五子棋不存在任何“双方共同目标”。换句话说，某步棋对这个玩家产生了正价值，则一定对他的对手产生了等量的负价值。关于什么是“非零和博弈”，可以自行搜索一下“囚徒困境”。

对于这类“完全信息动态零和博弈”问题，我们有一种通用的解法。因为是“完全信息”的，我们不需要考虑复杂的概率问题，只需要找到那个最好的决策即可。因为是“零和”的，我们只需要一个评估函数就可以对场上的局面进行评价（我的评分和对方的评分一定互为相反数）。因为是“动态”的，所以要考虑的问题很多，就需要用到后文的“博弈树”中的最大最小搜索进行解决了。

在博弈问题中,每次博弈可供选择的行动方案都有很多,因此会生成十分庞大的博弈树。一般只生成一定深度的博弈树,然后进行极小极大搜索。极大极小搜索是指:在一棵博弈树中,当轮到甲走时,甲定会选择子节点值最大的走法;而轮到乙走时,乙则会选择子节点

值最小的走法。使用估值函数对博弈树的每一个局面进行估值后,就可以通过极大极小搜索在博弈树中寻找最佳的合法走法。

在搜索的过程中，实际上有搜索很多点是多余的。此时我引入了α-β剪枝算法，一开始α和β是负正无穷，α表示到目前为止路径上发现的MAX的最佳(即极大值)选择，β表示到目前为止路径上发现的MIN的最佳(即极小值)选择。α-β搜索中不断更新α和β的值，并且当某个节点的值分别比目前的MAX的α或者MIN的β的值更差时，剪裁此节点剩下的分支(即终止递归调用)。

**（4）α-β剪枝**

​    Alpha-Beta剪枝用于裁剪搜索树中没有意义的不需要搜索的树枝，以提高运算速度。假设α为下界，β为上界，对于α<= N<=β：若 α <=β ，则N有解；若 α >β 则N无解。

**（5）估价函数**

本实验为了能更高效地进行剪枝，引进A*算法搜索，其中估价函数的好坏直接影响了决策树的搜索过程和路径判断，所以估价函数的定义至关重要。在同一个应用场景中，不同学者定义的估价函数往往都不一样，这也就导致决策树的效率和正确率都有很大偏差。

张明亮等学者在《五子棋机器博弈系统评估函数的设计》一文中指出，“因五子棋先手优势大，评估函数分为先手和后手两类：先手时加重己方非关键棋型分值，相当于加重进攻招法的分值；后手则加重对手棋型分值，相当于加重计算机防守招法的分值，道理是利用局势的发展趋势稍作引导，实验效果很好，明显加快后手棋的搜索，表明起到了优化博弈树的作用。”而学者董红安使用的估价函数非常简单，考虑的是每个“五元组”中棋子的状态。学者刘瑞使用的估价函数也是考虑每个“五元组”，但设计的规则要略复杂一些。

参考之前已有的对于估价函数的设计工作，提出了新的估价函数。

首先，我们给出“五元组”的定义。五元组指棋盘上连续的五个位置，包括横向、纵向、主对角线方向、副对角线方向，一共4个方向。

  在设计的估价函数中，主要包括两个部分，两个部分的和为总的估价函数。第一个部分的评判简便一些，直接使用所要落的子的位置来判断其价值，默认越靠近中心的位置份数越高，越靠近边缘的棋子分数越低。一般来说，在棋盘中心的棋子更容易与其他位置的棋子产生连线，更有价值，因此将他的坐标位置作为评判的标准，但考虑到具体情况中，并不一定越中心越好，只是可能更好，所以第一部分的分数的赋值为个位数，其所占的比重不大，这样让人感觉更合理一些，如下图所示，为具体评判标准：
